{"version":3,"sources":["webpack://ExifReader/webpack/universalModuleDefinition","webpack://ExifReader/webpack/bootstrap","webpack://ExifReader/./src/byte-order.js","webpack://ExifReader/./src/errors.js","webpack://ExifReader/./src/exif-reader.js","webpack://ExifReader/./src/image-header.js","webpack://ExifReader/./src/iptc-tag-names.js","webpack://ExifReader/./src/iptc-tags.js","webpack://ExifReader/./src/tag-names-0th-ifd.js","webpack://ExifReader/./src/tag-names-exif-ifd.js","webpack://ExifReader/./src/tag-names-gps-ifd.js","webpack://ExifReader/./src/tag-names-interoperability-ifd.js","webpack://ExifReader/./src/tag-names-utils.js","webpack://ExifReader/./src/tag-names.js","webpack://ExifReader/./src/tags.js","webpack://ExifReader/./src/types.js","webpack://ExifReader/./src/utils.js","webpack://ExifReader/./src/xmp-tag-names.js","webpack://ExifReader/./src/xmp-tags.js"],"names":["LITTLE_ENDIAN","BIG_ENDIAN","getByteOrder","dataView","tiffHeaderOffset","getUint16","Error","MetadataMissingError","message","name","stack","prototype","load","loadView","errors","exifErrors","data","options","expanded","DataView","error","console","warn","foundMetaData","tags","ImageHeader","check","parseAppMarkers","iptcDataOffset","xmpDataOffset","xmpFieldLength","hasExifData","readTags","Tags","read","exif","Object","assign","hasIptcData","IptcTags","iptc","hasXmpData","XmpTags","xmp","undefined","MIN_DATA_BUFFER_LENGTH","JPEG_ID","JPEG_ID_SIZE","APP_ID_OFFSET","APP_MARKER_SIZE","TIFF_HEADER_OFFSET","IPTC_DATA_OFFSET","XMP_DATA_OFFSET","SOF0_MARKER","SOF2_MARKER","DHT_MARKER","DQT_MARKER","DRI_MARKER","SOS_MARKER","APP0_MARKER","APP1_MARKER","APP13_MARKER","APP15_MARKER","COMMENT_MARKER","APP1_EXIF_IDENTIFIER","APP1_XMP_IDENTIFIER","APP13_IPTC_IDENTIFIER","byteLength","appMarkerPosition","fieldLength","isApp1ExifMarker","isApp1XMPMarker","isApp13PhotoshopMarker","isAppMarker","hasAppMarkers","markerIdLength","length","getUint8","appMarker","value","toString","getCreationDate","getCreationTime","string","parts","split","stringValue","character0","charAt","character1","description","parseInt","bits","duration","substr","intValue","strValue","formatVersions","objectDataPreviewFileFormat","n","i","date","time","parsedTime","BYTES_8BIM","BYTES_8BIM_SIZE","RESOURCE_BLOCK_HEADER_SIZE","NAA_RESOURCE_BLOCK_TYPE","TAG_HEADER_SIZE","dataOffset","getNaaResourceBlock","naaBlock","newDataOffset","parseTags","resourceBlock","getResourceBlock","isNaaResourceBlock","size","getBlockPadding","RESOURCE_BLOCK_SIZE_OFFSET","getUint32","type","encoding","endOfBlockOffset","readTag","tag","tagSize","id","Array","push","TAG_LEAD_BYTE","TAG_CODE_OFFSET","TAG_SIZE_OFFSET","leadByte","tagCode","tagValue","getTagValue","IptcTagNames","tagName","tagDescription","TextEncoder","rawTagValue","buffer","slice","TextDecoder","decode","map","charCode","String","fromCharCode","join","decodeAsciiValue","log","offset","valueIndex","asciiValue","decodeURIComponent","escape","character","getEncodedString","x","y","ref","num","status","mode","getStringValue","getCharacterArray","charCodeAt","TagNames0thIfd","TagNamesExifIfd","TagNamesGpsIfd","TagNamesInteroperabilityIfd","EXIF_IFD_POINTER_KEY","GPS_INFO_IFD_POINTER_KEY","INTEROPERABILITY_IFD_POINTER_KEY","getTagValueAt","Types","getByteAt","getAsciiAt","getShortAt","getLongAt","getRationalAt","getUndefinedAt","getSlongAt","getSrationalAt","byteOrder","ByteOrder","read0thIfd","readExifIfd","readGpsIfd","readInteroperabilityIfd","readIfd","get0thIfdOffset","ifdType","FIELD_COUNT_SIZE","getTypeSize","FIELD_SIZE","numberOfFields","fieldIndex","TAG_TYPE_OFFSET","TAG_COUNT_OFFSET","TAG_VALUE_OFFSET","tagType","tagCount","typeSizes","tagValueFitsInOffsetSlot","tagValueOffset","tagValueFitsInDataView","tagTypes","splitNullSeparatedAsciiString","TagNames","count","getAsciiValue","charArray","getInt32","typeName","getStringFromDataView","chars","calculateGPSValue","degreesString","minutesString","degrees","parseFloat","minutes","Number","isNaN","metadataSize","doc","getDocument","rdf","getRDF","parseXMPObject","convertToObject","DOMParser","domParser","xmlSource","parseFromString","documentElement","nodeName","node","childNodes","isTopNode","getChildNodes","hasTextOnlyContent","getTextValue","getElementsFromNodes","elements","nodes","nodeValue","forEach","isElement","nodeElement","getElementFromNode","isArray","attributes","getAttributes","element","xmpObject","parseNodeAttributesAsTags","parseNodeChildrenAsTags","isTagAttribute","getLocalName","getDescription","isNamespaceDefinition","getDescriptionOfArray","getDescriptionOfObject","XmpTagNames","item","descriptions","key","getClearTextKey","children","parseNodeAsTag","hasNestedSimpleRdfDescription","parseNodeAsSimpleRdfDescription","hasNestedStructureRdfDescription","parseNodeAsStructureRdfDescription","isCompactStructure","parseNodeAsCompactStructure","parseNodeAsArray","parseNodeAsSimpleValue","parseNodeAttributes","parseNodeChildrenAsAttributes","parseRdfValue","getURIValue","keys","getArrayChild","items","parseArrayValue","hasNestedArrayValue"],"mappings":"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","file":"exif-reader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ExifReader\"] = factory();\n\telse\n\t\troot[\"ExifReader\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/exif-reader.js\");\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nconst LITTLE_ENDIAN = 0x4949;\r\nconst BIG_ENDIAN = 0x4d4d;\r\n\r\nexport default {\r\n    BIG_ENDIAN,\r\n    LITTLE_ENDIAN,\r\n    getByteOrder\r\n};\r\n\r\nfunction getByteOrder(dataView, tiffHeaderOffset) {\r\n    if (dataView.getUint16(tiffHeaderOffset) === LITTLE_ENDIAN) {\r\n        return LITTLE_ENDIAN;\r\n    } else if (dataView.getUint16(tiffHeaderOffset) === BIG_ENDIAN) {\r\n        return BIG_ENDIAN;\r\n    }\r\n    throw new Error('Illegal byte order value. Faulty image.');\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\n/**\r\n * Thrown when no Exif metadata was found for the given image.\r\n *\r\n * @param {string} message The error message.\r\n */\r\nfunction MetadataMissingError(message) {\r\n    this.name = 'MetadataMissingError';\r\n    this.message = message || 'No Exif data';\r\n    this.stack = (new Error()).stack;\r\n}\r\n\r\nMetadataMissingError.prototype = new Error;\r\n\r\nexport default {\r\n    MetadataMissingError,\r\n};\r\n","/**\r\n * ExifReader\r\n * http://github.com/mattiasw/exifreader\r\n * Copyright (C) 2011-2018  Mattias Wallander <mattias@wallander.eu>\r\n * This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\r\n */\r\n\r\nimport ImageHeader from './image-header';\r\nimport Tags from './tags';\r\nimport IptcTags from './iptc-tags';\r\nimport XmpTags from './xmp-tags';\r\nimport exifErrors from './errors';\r\n\r\nexport default {\r\n    load,\r\n    loadView,\r\n    errors: exifErrors,\r\n};\r\n\r\nexport function load(data, options = {expanded: false}) {\r\n    let dataView;\r\n\r\n    try {\r\n        dataView = new DataView(data);\r\n    } catch (error) {\r\n        console.warn('Warning: A full DataView implementation is not available. If you\\'re using Node.js you probably want to do this:\\n  1. Install a DataView polyfill, e.g. jdataview: npm install --save jdataview\\n  2. Require that at the top of your script: global.DataView = require(\\'jdataview\\');\\nSee an example of this in the ExifReader example directory.'); // eslint-disable-line no-console\r\n        return {};\r\n    }\r\n\r\n    return loadView(dataView, options);\r\n}\r\n\r\nexport function loadView(dataView, options = {expanded: false}) {\r\n    let foundMetaData = false;\r\n    let tags = {};\r\n\r\n    ImageHeader.check(dataView);\r\n    const {tiffHeaderOffset, iptcDataOffset, xmpDataOffset, xmpFieldLength} = ImageHeader.parseAppMarkers(dataView);\r\n\r\n    if (hasExifData(tiffHeaderOffset)) {\r\n        foundMetaData = true;\r\n        const readTags = Tags.read(dataView, tiffHeaderOffset);\r\n        if (options.expanded) {\r\n            tags.exif = readTags;\r\n        } else {\r\n            tags = Object.assign({}, tags, readTags);\r\n        }\r\n    }\r\n    if (hasIptcData(iptcDataOffset)) {\r\n        foundMetaData = true;\r\n        const readTags = IptcTags.read(dataView, iptcDataOffset);\r\n        if (options.expanded) {\r\n            tags.iptc = readTags;\r\n        } else {\r\n            tags = Object.assign({}, tags, readTags);\r\n        }\r\n    }\r\n    if (hasXmpData(xmpDataOffset)) {\r\n        foundMetaData = true;\r\n        const readTags = XmpTags.read(dataView, xmpDataOffset, xmpFieldLength);\r\n        if (options.expanded) {\r\n            tags.xmp = readTags;\r\n        } else {\r\n            tags = Object.assign({}, tags, readTags);\r\n        }\r\n    }\r\n    if (!foundMetaData) {\r\n        throw new exifErrors.MetadataMissingError();\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction hasExifData(tiffHeaderOffset) {\r\n    return tiffHeaderOffset !== undefined;\r\n}\r\n\r\nfunction hasIptcData(iptcDataOffset) {\r\n    return iptcDataOffset !== undefined;\r\n}\r\n\r\nfunction hasXmpData(xmpDataOffset) {\r\n    return xmpDataOffset !== undefined;\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {getStringFromDataView} from './utils';\r\n\r\nconst MIN_DATA_BUFFER_LENGTH = 2;\r\nconst JPEG_ID = 0xffd8;\r\nconst JPEG_ID_SIZE = 2;\r\nconst APP_ID_OFFSET = 4;\r\nconst APP_MARKER_SIZE = 2;\r\nconst TIFF_HEADER_OFFSET = 10; // From start of APP1 marker.\r\nconst IPTC_DATA_OFFSET = 18; // From start of APP13 marker.\r\nconst XMP_DATA_OFFSET = 33; // From start of APP1 marker.\r\n\r\nconst SOF0_MARKER = 0xffc0;\r\nconst SOF2_MARKER = 0xffc2;\r\nconst DHT_MARKER = 0xffc4;\r\nconst DQT_MARKER = 0xffdb;\r\nconst DRI_MARKER = 0xffdd;\r\nconst SOS_MARKER = 0xffda;\r\n\r\nconst APP0_MARKER = 0xffe0;\r\nconst APP1_MARKER = 0xffe1;\r\nconst APP13_MARKER = 0xffed;\r\nconst APP15_MARKER = 0xffef;\r\nconst COMMENT_MARKER = 0xfffe;\r\nconst APP1_EXIF_IDENTIFIER = 'Exif';\r\nconst APP1_XMP_IDENTIFIER = 'http://ns.adobe.com/xap/1.0/';\r\nconst APP13_IPTC_IDENTIFIER = 'Photoshop 3.0';\r\n\r\nexport default {\r\n    check,\r\n    parseAppMarkers\r\n};\r\n\r\nfunction check(dataView) {\r\n    if ((dataView.byteLength < MIN_DATA_BUFFER_LENGTH) || (dataView.getUint16(0, false) !== JPEG_ID)) {\r\n        throw new Error('Invalid image format');\r\n    }\r\n}\r\n\r\nfunction parseAppMarkers(dataView) {\r\n    let appMarkerPosition = JPEG_ID_SIZE;\r\n    let fieldLength;\r\n    let tiffHeaderOffset;\r\n    let iptcDataOffset;\r\n    let xmpDataOffset;\r\n    let xmpFieldLength;\r\n\r\n    while (appMarkerPosition + APP_ID_OFFSET + 5 <= dataView.byteLength) {\r\n        if (isApp1ExifMarker(dataView, appMarkerPosition)) {\r\n            fieldLength = dataView.getUint16(appMarkerPosition + APP_MARKER_SIZE, false);\r\n            tiffHeaderOffset = appMarkerPosition + TIFF_HEADER_OFFSET;\r\n        } else if (isApp1XMPMarker(dataView, appMarkerPosition)) {\r\n            fieldLength = dataView.getUint16(appMarkerPosition + APP_MARKER_SIZE, false);\r\n            xmpDataOffset = appMarkerPosition + XMP_DATA_OFFSET;\r\n            xmpFieldLength = fieldLength - (XMP_DATA_OFFSET - APP_MARKER_SIZE);\r\n        } else if (isApp13PhotoshopMarker(dataView, appMarkerPosition)) {\r\n            fieldLength = dataView.getUint16(appMarkerPosition + APP_MARKER_SIZE, false);\r\n            iptcDataOffset = appMarkerPosition + IPTC_DATA_OFFSET;\r\n        } else if (isAppMarker(dataView, appMarkerPosition)) {\r\n            fieldLength = dataView.getUint16(appMarkerPosition + APP_MARKER_SIZE, false);\r\n        } else {\r\n            break;\r\n        }\r\n        appMarkerPosition += APP_MARKER_SIZE + fieldLength;\r\n    }\r\n\r\n    return {\r\n        hasAppMarkers: appMarkerPosition > JPEG_ID_SIZE,\r\n        tiffHeaderOffset,\r\n        iptcDataOffset,\r\n        xmpDataOffset,\r\n        xmpFieldLength\r\n    };\r\n}\r\n\r\nfunction isApp1ExifMarker(dataView, appMarkerPosition) {\r\n    const markerIdLength = APP1_EXIF_IDENTIFIER.length;\r\n\r\n    return (dataView.getUint16(appMarkerPosition, false) === APP1_MARKER)\r\n        && (getStringFromDataView(dataView, appMarkerPosition + APP_ID_OFFSET, markerIdLength) === APP1_EXIF_IDENTIFIER)\r\n        && (dataView.getUint8(appMarkerPosition + APP_ID_OFFSET + markerIdLength, false) === 0x00);\r\n}\r\n\r\nfunction isApp1XMPMarker(dataView, appMarkerPosition) {\r\n    const markerIdLength = APP1_XMP_IDENTIFIER.length;\r\n\r\n    return (dataView.getUint16(appMarkerPosition, false) === APP1_MARKER)\r\n        && (getStringFromDataView(dataView, appMarkerPosition + APP_ID_OFFSET, markerIdLength) === APP1_XMP_IDENTIFIER)\r\n        && (dataView.getUint8(appMarkerPosition + APP_ID_OFFSET + markerIdLength, false) === 0x00);\r\n}\r\n\r\nfunction isApp13PhotoshopMarker(dataView, appMarkerPosition) {\r\n    const markerIdLength = APP13_IPTC_IDENTIFIER.length;\r\n\r\n    return (dataView.getUint16(appMarkerPosition, false) === APP13_MARKER)\r\n        && (getStringFromDataView(dataView, appMarkerPosition + APP_ID_OFFSET, markerIdLength) === APP13_IPTC_IDENTIFIER)\r\n        && (dataView.getUint8(appMarkerPosition + APP_ID_OFFSET + markerIdLength, false) === 0x00);\r\n}\r\n\r\nfunction isAppMarker(dataView, appMarkerPosition) {\r\n    const appMarker = dataView.getUint16(appMarkerPosition, false);\r\n    return ((appMarker >= APP0_MARKER) && (appMarker <= APP15_MARKER))\r\n        || (appMarker === COMMENT_MARKER)\r\n        || (appMarker === SOF0_MARKER)\r\n        || (appMarker === SOF2_MARKER)\r\n        || (appMarker === DHT_MARKER)\r\n        || (appMarker === DQT_MARKER)\r\n        || (appMarker === DRI_MARKER)\r\n        || (appMarker === SOS_MARKER);\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {getStringValue} from './tag-names-utils';\r\n\r\nexport default {\r\n    'iptc': {\r\n        0x0100: {\r\n            'name': 'Model Version',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x0105: {\r\n            'name': 'Destination',\r\n            'repeatable': true\r\n        },\r\n        0x0114: {\r\n            'name': 'File Format',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x0116: {\r\n            'name': 'File Format Version',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x011E: {\r\n            'name': 'Service Identifier'\r\n        },\r\n        0x0128: {\r\n            'name': 'Envelope Number'\r\n        },\r\n        0x0132: {\r\n            'name': 'Product ID'\r\n        },\r\n        0x013C: {\r\n            'name': 'Envelope Priority'\r\n        },\r\n        0x0146: {\r\n            'name': 'Date Sent',\r\n            'description': getCreationDate\r\n        },\r\n        0x0150: {\r\n            'name': 'Time Sent',\r\n            'description': getCreationTime\r\n        },\r\n        0x015a: {\r\n            'name': 'Coded Character Set',\r\n            'description': (value) => {\r\n                const string = getStringValue(value);\r\n                if (string === '\\x1b%G') {\r\n                    return 'UTF-8';\r\n                } else if (string === '\\x1b%5') {\r\n                    return 'windows-1252';\r\n                } else if (string === '\\x1b%/G') {\r\n                    return 'UTF-8 Level 1';\r\n                } else if (string === '\\x1b%/H') {\r\n                    return 'UTF-8 Level 2';\r\n                } else if (string === '\\x1b%/I') {\r\n                    return 'UTF-8 Level 3';\r\n                } else if (string === '\\x1B/A') {\r\n                    return 'iso-8859-1';\r\n                } else if (string === '\\x1B/B') {\r\n                    return 'iso-8859-2';\r\n                } else if (string === '\\x1B/C') {\r\n                    return 'iso-8859-3';\r\n                } else if (string === '\\x1B/D') {\r\n                    return 'iso-8859-4';\r\n                } else if (string === '\\x1B/@') {\r\n                    return 'iso-8859-5';\r\n                } else if (string === '\\x1B/G') {\r\n                    return 'iso-8859-6';\r\n                } else if (string === '\\x1B/F') {\r\n                    return 'iso-8859-7';\r\n                } else if (string === '\\x1B/H') {\r\n                    return 'iso-8859-8';\r\n                }\r\n                return 'Unknown';\r\n            },\r\n            'encoding_name': (value) => {\r\n                const string = getStringValue(value);\r\n                if (string === '\\x1b%G') {\r\n                    return 'utf-8';\r\n                } else if (string === '\\x1b%5') {\r\n                    return 'windows-1252';\r\n                } else if (string === '\\x1B/A') {\r\n                    return 'iso-8859-1';\r\n                } else if (string === '\\x1B/B') {\r\n                    return 'iso-8859-2';\r\n                } else if (string === '\\x1B/C') {\r\n                    return 'iso-8859-3';\r\n                } else if (string === '\\x1B/D') {\r\n                    return 'iso-8859-4';\r\n                } else if (string === '\\x1B/@') {\r\n                    return 'iso-8859-5';\r\n                } else if (string === '\\x1B/G') {\r\n                    return 'iso-8859-6';\r\n                } else if (string === '\\x1B/F') {\r\n                    return 'iso-8859-7';\r\n                } else if (string === '\\x1B/H') {\r\n                    return 'iso-8859-8';\r\n                }\r\n            }\r\n        },\r\n        0x0164: {\r\n            'name': 'UNO'\r\n        },\r\n        0x0178: {\r\n            'name': 'ARM Identifier',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x017A: {\r\n            'name': 'ARM Version',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x0200: {\r\n            'name': 'Record Version',\r\n            'description': (value) => {\r\n                return ((value[0] << 8) + value[1]).toString();\r\n            }\r\n        },\r\n        0x0203: 'Object Type Reference',\r\n        0x0204: 'Object Attribute Reference',\r\n        0x0205: 'Object Name',\r\n        0x0207: 'Edit Status',\r\n        0x0208: {\r\n            'name': 'Editorial Update',\r\n            'description': (value) => {\r\n                if (getStringValue(value) === '01') {\r\n                    return 'Additional Language';\r\n                }\r\n                return 'Unknown';\r\n            }\r\n        },\r\n        0x020a: 'Urgency',\r\n        0x020c: {\r\n            'name': 'Subject Reference',\r\n            'repeatable': true,\r\n            'description': (value) => {\r\n                const parts = getStringValue(value).split(':');\r\n                return parts[2] + (parts[3] ? '/' + parts[3] : '') + (parts[4] ? '/' + parts[4] : '');\r\n            }\r\n        },\r\n        0x020f: 'Category',\r\n        0x0214: {\r\n            'name': 'Supplemental Category',\r\n            'repeatable': true\r\n        },\r\n        0x0216: 'Fixture Identifier',\r\n        0x0219: {\r\n            'name': 'Keywords',\r\n            'repeatable': true\r\n        },\r\n        0x021a: {\r\n            'name': 'Content Location Code',\r\n            'repeatable': true\r\n        },\r\n        0x021b: {\r\n            'name': 'Content Location Name',\r\n            'repeatable': true\r\n        },\r\n        0x021e: 'Release Date',\r\n        0x0223: 'Release Time',\r\n        0x0225: 'Expiration Date',\r\n        0x0226: 'Expiration Time',\r\n        0x0228: 'Special Instructions',\r\n        0x022a: {\r\n            'name': 'Action Advised',\r\n            'description': (value) => {\r\n                const string = getStringValue(value);\r\n                if (string === '01') {\r\n                    return 'Object Kill';\r\n                } else if (string === '02') {\r\n                    return 'Object Replace';\r\n                } else if (string === '03') {\r\n                    return 'Object Append';\r\n                } else if (string === '04') {\r\n                    return 'Object Reference';\r\n                }\r\n                return 'Unknown';\r\n            }\r\n        },\r\n        0x022d: {\r\n            'name': 'Reference Service',\r\n            'repeatable': true\r\n        },\r\n        0x022f: {\r\n            'name': 'Reference Date',\r\n            'repeatable': true\r\n        },\r\n        0x0232: {\r\n            'name': 'Reference Number',\r\n            'repeatable': true\r\n        },\r\n        0x0237: {\r\n            'name': 'Date Created',\r\n            'description': getCreationDate\r\n        },\r\n        0x023c: {\r\n            'name': 'Time Created',\r\n            'description': getCreationTime\r\n        },\r\n        0x023e: {\r\n            'name': 'Digital Creation Date',\r\n            'description': getCreationDate\r\n        },\r\n        0x023f: {\r\n            'name': 'Digital Creation Time',\r\n            'description': getCreationTime\r\n        },\r\n        0x0241: 'Originating Program',\r\n        0x0246: 'Program Version',\r\n        0x024b: {\r\n            'name': 'Object Cycle',\r\n            'description': (value) => {\r\n                const string = getStringValue(value);\r\n                if (string === 'a') {\r\n                    return 'morning';\r\n                } else if (string === 'p') {\r\n                    return 'evening';\r\n                } else if (string === 'b') {\r\n                    return 'both';\r\n                }\r\n                return 'Unknown';\r\n            }\r\n        },\r\n        0x0250: {\r\n            'name': 'By-line',\r\n            'repeatable': true\r\n        },\r\n        0x0255: {\r\n            'name': 'By-line Title',\r\n            'repeatable': true\r\n        },\r\n        0x025a: 'City',\r\n        0x025c: 'Sub-location',\r\n        0x025f: 'Province/State',\r\n        0x0264: 'Country/Primary Location Code',\r\n        0x0265: 'Country/Primary Location Name',\r\n        0x0267: 'Original Transmission Reference',\r\n        0x0269: 'Headline',\r\n        0x026e: 'Credit',\r\n        0x0273: 'Source',\r\n        0x0274: 'Copyright Notice',\r\n        0x0276: {\r\n            'name': 'Contact',\r\n            'repeatable': true\r\n        },\r\n        0x0278: 'Caption/Abstract',\r\n        0x027a: {\r\n            'name': 'Writer/Editor',\r\n            'repeatable': true\r\n        },\r\n        0x027d: {\r\n            'name': 'Rasterized Caption',\r\n            'description': (value) => value\r\n        },\r\n        0x0282: 'Image Type',\r\n        0x0283: {\r\n            'name': 'Image Orientation',\r\n            'description': (value) => {\r\n                const string = getStringValue(value);\r\n                if (string === 'P') {\r\n                    return 'Portrait';\r\n                } else if (string === 'L') {\r\n                    return 'Landscape';\r\n                } else if (string === 'S') {\r\n                    return 'Square';\r\n                }\r\n                return 'Unknown';\r\n            }\r\n        },\r\n        0x0287: 'Language Identifier',\r\n        0x0296: {\r\n            'name': 'Audio Type',\r\n            'description': (value) => {\r\n                const stringValue = getStringValue(value);\r\n                const character0 = stringValue.charAt(0);\r\n                const character1 = stringValue.charAt(1);\r\n                let description = '';\r\n\r\n                if (character0 === '1') {\r\n                    description += 'Mono';\r\n                } else if (character0 === '2') {\r\n                    description += 'Stereo';\r\n                }\r\n\r\n                if (character1 === 'A') {\r\n                    description += ', actuality';\r\n                } else if (character1 === 'C') {\r\n                    description += ', question and answer session';\r\n                } else if (character1 === 'M') {\r\n                    description += ', music, transmitted by itself';\r\n                } else if (character1 === 'Q') {\r\n                    description += ', response to a question';\r\n                } else if (character1 === 'R') {\r\n                    description += ', raw sound';\r\n                } else if (character1 === 'S') {\r\n                    description += ', scener';\r\n                } else if (character1 === 'V') {\r\n                    description += ', voicer';\r\n                } else if (character1 === 'W') {\r\n                    description += ', wrap';\r\n                }\r\n\r\n                if (description !== '') {\r\n                    return description;\r\n                }\r\n                return stringValue;\r\n            }\r\n        },\r\n        0x0297: {\r\n            'name': 'Audio Sampling Rate',\r\n            'description': (value) => parseInt(getStringValue(value), 10) + ' Hz'\r\n        },\r\n        0x0298: {\r\n            'name': 'Audio Sampling Resolution',\r\n            'description': (value) => {\r\n                const bits = parseInt(getStringValue(value), 10);\r\n                return bits + (bits === 1 ? ' bit' : ' bits');\r\n            }\r\n        },\r\n        0x0299: {\r\n            'name': 'Audio Duration',\r\n            'description': (value) => {\r\n                const duration = getStringValue(value);\r\n                if (duration.length >= 6) {\r\n                    return duration.substr(0, 2) + ':' + duration.substr(2, 2) + ':' + duration.substr(4, 2);\r\n                }\r\n                return duration;\r\n            }\r\n        },\r\n        0x029a: 'Audio Outcue',\r\n        0x02c8: {\r\n            'name': (value) => {\r\n                return value.length === 2 ? 'ObjectData Preview File Format' : 'Record 2 destination';\r\n            },\r\n            'description': (value) => {\r\n                if (value.length === 2) {\r\n                    const intValue = (value[0] << 8) + value[1];\r\n                    if (intValue === 0) {\r\n                        return 'No ObjectData';\r\n                    } else if (intValue === 1) {\r\n                        return 'IPTC-NAA Digital Newsphoto Parameter Record';\r\n                    } else if (intValue === 2) {\r\n                        return 'IPTC7901 Recommended Message Format';\r\n                    } else if (intValue === 3) {\r\n                        return 'Tagged Image File Format (Adobe/Aldus Image data)';\r\n                    } else if (intValue === 4) {\r\n                        return 'Illustrator (Adobe Graphics data)';\r\n                    } else if (intValue === 5) {\r\n                        return 'AppleSingle (Apple Computer Inc)';\r\n                    } else if (intValue === 6) {\r\n                        return 'NAA 89-3 (ANPA 1312)';\r\n                    } else if (intValue === 7) {\r\n                        return 'MacBinary II';\r\n                    } else if (intValue === 8) {\r\n                        return 'IPTC Unstructured Character Oriented File Format (UCOFF)';\r\n                    } else if (intValue === 9) {\r\n                        return 'United Press International ANPA 1312 variant';\r\n                    } else if (intValue === 10) {\r\n                        return 'United Press International Down-Load Message';\r\n                    } else if (intValue === 11) {\r\n                        return 'JPEG File Interchange (JFIF)';\r\n                    } else if (intValue === 12) {\r\n                        return 'Photo-CD Image-Pac (Eastman Kodak)';\r\n                    } else if (intValue === 13) {\r\n                        return 'Microsoft Bit Mapped Graphics File [*.BMP]';\r\n                    } else if (intValue === 14) {\r\n                        return 'Digital Audio File [*.WAV] (Microsoft & Creative Labs)';\r\n                    } else if (intValue === 15) {\r\n                        return 'Audio plus Moving Video [*.AVI] (Microsoft)';\r\n                    } else if (intValue === 16) {\r\n                        return 'PC DOS/Windows Executable Files [*.COM][*.EXE]';\r\n                    } else if (intValue === 17) {\r\n                        return 'Compressed Binary File [*.ZIP] (PKWare Inc)';\r\n                    } else if (intValue === 18) {\r\n                        return 'Audio Interchange File Format AIFF (Apple Computer Inc)';\r\n                    } else if (intValue === 19) {\r\n                        return 'RIFF Wave (Microsoft Corporation)';\r\n                    } else if (intValue === 20) {\r\n                        return 'Freehand (Macromedia/Aldus)';\r\n                    } else if (intValue === 21) {\r\n                        return 'Hypertext Markup Language \"HTML\" (The Internet Society)';\r\n                    } else if (intValue === 22) {\r\n                        return 'MPEG 2 Audio Layer 2 (Musicom), ISO/IEC';\r\n                    } else if (intValue === 23) {\r\n                        return 'MPEG 2 Audio Layer 3, ISO/IEC';\r\n                    } else if (intValue === 24) {\r\n                        return 'Portable Document File (*.PDF) Adobe';\r\n                    } else if (intValue === 25) {\r\n                        return 'News Industry Text Format (NITF)';\r\n                    } else if (intValue === 26) {\r\n                        return 'Tape Archive (*.TAR)';\r\n                    } else if (intValue === 27) {\r\n                        return 'Tidningarnas Telegrambyr NITF version (TTNITF DTD)';\r\n                    } else if (intValue === 28) {\r\n                        return 'Ritzaus Bureau NITF version (RBNITF DTD)';\r\n                    } else if (intValue === 29) {\r\n                        return 'Corel Draw [*.CDR]';\r\n                    }\r\n                } else {\r\n                    const strValue = getStringValue(value);\r\n                    return strValue;\r\n                }\r\n            }\r\n        },\r\n        0x02c9: {\r\n            'name': 'ObjectData Preview File Format Version',\r\n            'description': (value, tags) => {\r\n                // Format ID, Version ID, Version Description\r\n                const formatVersions = {\r\n                    '00': {'00': '1'},\r\n                    '01': {'01': '1', '02': '2', '03': '3', '04': '4'},\r\n                    '02': {'04': '4'},\r\n                    '03': {'01': '5.0', '02': '6.0'},\r\n                    '04': {'01': '1.40'},\r\n                    '05': {'01': '2'},\r\n                    '06': {'01': '1'},\r\n                    '11': {'01': '1.02'},\r\n                    '20': {'01': '3.1', '02': '4.0', '03': '5.0', '04': '5.5'},\r\n                    '21': {'02': '2.0'}\r\n                };\r\n                const stringValue = getStringValue(value);\r\n\r\n                if (tags['ObjectData Preview File Format']) {\r\n                    const objectDataPreviewFileFormat = getStringValue(tags['ObjectData Preview File Format'].value);\r\n                    if (formatVersions[objectDataPreviewFileFormat]\r\n                        && formatVersions[objectDataPreviewFileFormat][stringValue]) {\r\n                        return formatVersions[objectDataPreviewFileFormat][stringValue];\r\n                    }\r\n                }\r\n\r\n                return stringValue;\r\n            }\r\n        },\r\n        0x02ba: 'ShortDocumentID',\r\n        0x02bb: 'UniqueDocumentID',\r\n        0x02bc: 'OwnerID',\r\n        0x02ca: 'ObjectData Preview Data',\r\n        0x070a: {\r\n            'name': 'Size Mode',\r\n            'description': (value) => {\r\n                return (value[0]).toString();\r\n            }\r\n        },\r\n        0x0714: {\r\n            'name': 'Max Subfile Size',\r\n            'description': (value) => {\r\n                let n = 0;\r\n                for (let i = 0; i < value.length; i++) {\r\n                    n = (n << 8) + value[i];\r\n                }\r\n                return n.toString();\r\n            }\r\n        },\r\n        0x075a: {\r\n            'name': 'ObjectData Size Announced',\r\n            'description': (value) => {\r\n                let n = 0;\r\n                for (let i = 0; i < value.length; i++) {\r\n                    n = (n << 8) + value[i];\r\n                }\r\n                return n.toString();\r\n            }\r\n        }\r\n\r\n    }\r\n};\r\n\r\nfunction getCreationDate(value) {\r\n    const date = getStringValue(value);\r\n\r\n    if (date.length >= 8) {\r\n        return date.substr(0, 4) + '-' + date.substr(4, 2) + '-' + date.substr(6, 2);\r\n    }\r\n\r\n    return date;\r\n}\r\n\r\nfunction getCreationTime(value) {\r\n    const time = getStringValue(value);\r\n    let parsedTime = time;\r\n\r\n    if (time.length >= 6) {\r\n        parsedTime = time.substr(0, 2) + ':' + time.substr(2, 2) + ':' + time.substr(4, 2);\r\n        if (time.length === 11) {\r\n            parsedTime += time.substr(6, 1) + time.substr(7, 2) + ':' + time.substr(9, 2);\r\n        }\r\n    }\r\n\r\n    return parsedTime;\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport IptcTagNames from './iptc-tag-names';\r\n\r\nconst BYTES_8BIM = 0x3842494d;\r\nconst BYTES_8BIM_SIZE = 4;\r\nconst RESOURCE_BLOCK_HEADER_SIZE = BYTES_8BIM_SIZE + 8;\r\nconst NAA_RESOURCE_BLOCK_TYPE = 0x0404;\r\nconst TAG_HEADER_SIZE = 5;\r\n\r\nexport default {\r\n    read\r\n};\r\n\r\nfunction read(dataView, dataOffset) {\r\n    try {\r\n        const {naaBlock, dataOffset: newDataOffset} = getNaaResourceBlock(dataView, dataOffset);\r\n        return parseTags(dataView, naaBlock, newDataOffset);\r\n    } catch (error) {\r\n        return {};\r\n    }\r\n}\r\n\r\nfunction getNaaResourceBlock(dataView, dataOffset) {\r\n    while (dataOffset + RESOURCE_BLOCK_HEADER_SIZE <= dataView.byteLength) {\r\n        const resourceBlock = getResourceBlock(dataView, dataOffset);\r\n        if (isNaaResourceBlock(resourceBlock)) {\r\n            return {naaBlock: resourceBlock, dataOffset};\r\n        }\r\n        dataOffset += RESOURCE_BLOCK_HEADER_SIZE + resourceBlock.size + getBlockPadding(resourceBlock);\r\n    }\r\n    throw new Error('No IPTC NAA resource block.');\r\n}\r\n\r\nfunction getResourceBlock(dataView, dataOffset) {\r\n    const RESOURCE_BLOCK_SIZE_OFFSET = 10;\r\n\r\n    if (dataView.getUint32(dataOffset, false) !== BYTES_8BIM) {\r\n        throw new Error('Not an IPTC resource block.');\r\n    }\r\n\r\n    return {\r\n        type: dataView.getUint16(dataOffset + BYTES_8BIM_SIZE, false),\r\n        size: dataView.getUint16(dataOffset + RESOURCE_BLOCK_SIZE_OFFSET, false)\r\n    };\r\n}\r\n\r\nfunction isNaaResourceBlock(resourceBlock) {\r\n    return resourceBlock.type === NAA_RESOURCE_BLOCK_TYPE;\r\n}\r\n\r\nfunction getBlockPadding(resourceBlock) {\r\n    if (resourceBlock.size % 2 !== 0) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction parseTags(dataView, naaBlock, dataOffset) {\r\n    const tags = {};\r\n    let encoding = undefined;\r\n\r\n    dataOffset += RESOURCE_BLOCK_HEADER_SIZE;\r\n    const endOfBlockOffset = dataOffset + naaBlock['size'];\r\n\r\n    while ((dataOffset < endOfBlockOffset) && (dataOffset < dataView.byteLength)) {\r\n        const {tag, tagSize} = readTag(dataView, dataOffset, tags, encoding);\r\n\r\n        // 29/8/18 : if tag is null then it hasn't been parsed correctly\r\n        if (tag === null) {\r\n            break; // Don't attempt any further parsing if the data looks invalid\r\n        }\r\n\r\n        // If the tag just parsed specifies the text encoding, save it for decoding later strings\r\n        if ('encoding' in tag) {\r\n            encoding = tag.encoding;\r\n        }\r\n\r\n        if ((tags[tag.name] === undefined) || (tag['repeatable'] === undefined)) {\r\n            tags[tag.name] = {\r\n                id: tag.id,\r\n                value: tag.value,\r\n                description: tag.description\r\n            };\r\n        } else {\r\n            if (!(tags[tag.name] instanceof Array)) {\r\n                tags[tag.name] = [{\r\n                    id: tag.id,\r\n                    value: tags[tag.name].value,\r\n                    description: tags[tag.name].description\r\n                }];\r\n            }\r\n            tags[tag.name].push({\r\n                id: tag.id,\r\n                value: tag.value,\r\n                description: tag.description\r\n            });\r\n        }\r\n\r\n        dataOffset += TAG_HEADER_SIZE + tagSize;\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction readTag(dataView, dataOffset, tags, encoding) {\r\n    const TAG_LEAD_BYTE = 0x1C;\r\n    const TAG_CODE_OFFSET = 1;\r\n    const TAG_SIZE_OFFSET = 3;\r\n\r\n    // 29/8/18 : sanity check that the tag starts with 0x1C\r\n    const leadByte = dataView.getUint8(dataOffset);\r\n    if (leadByte !== TAG_LEAD_BYTE) {\r\n        const tag = null, tagSize = 0;\r\n        return {tag, tagSize};\r\n    }\r\n\r\n    const tagCode = dataView.getUint16(dataOffset + TAG_CODE_OFFSET, false);\r\n    const tagSize = dataView.getUint16(dataOffset + TAG_SIZE_OFFSET, false);\r\n    const tagValue = getTagValue(dataView, dataOffset + TAG_HEADER_SIZE, tagSize);\r\n    let tag;\r\n\r\n    if (IptcTagNames['iptc'][tagCode] !== undefined) {\r\n        let tagName, tagDescription;\r\n\r\n        // Case that both 'name' and 'description' are defined for this code\r\n        if ((IptcTagNames['iptc'][tagCode]['name'] !== undefined)\r\n            && (IptcTagNames['iptc'][tagCode]['description'] !== undefined)) {\r\n            // Case that 'name' is a function rather than a string\r\n            if (typeof (IptcTagNames['iptc'][tagCode]['name']) === 'function') {\r\n                tagName = IptcTagNames['iptc'][tagCode]['name'](tagValue);\r\n            } else {\r\n                // 'name' is a string\r\n                tagName = IptcTagNames['iptc'][tagCode]['name'];\r\n            }\r\n            tagDescription = IptcTagNames['iptc'][tagCode]['description'](tagValue, tags);\r\n        } else {\r\n            // Case that 'name' is defined (but not 'description')\r\n            if (IptcTagNames['iptc'][tagCode]['name'] !== undefined) {\r\n                tagName = IptcTagNames['iptc'][tagCode]['name'];\r\n            } else {\r\n                // Case that the entry is a single string => it's the name\r\n                tagName = IptcTagNames['iptc'][tagCode];\r\n            }\r\n            if (tagValue instanceof Array) {\r\n                // If we have TextEncoder and an encoding\r\n                if ((typeof TextEncoder !== 'undefined') && (encoding !== undefined)) {\r\n                    // Decode the ArrayBuffer using the specified encoding\r\n                    const rawTagValue = dataView.buffer.slice(dataOffset + TAG_HEADER_SIZE, dataOffset + TAG_HEADER_SIZE + tagSize);\r\n                    tagDescription = new TextDecoder(encoding).decode(rawTagValue);\r\n                } else {\r\n                    tagDescription = tagValue.map((charCode) => String.fromCharCode(charCode)).join('');\r\n                    tagDescription = decodeAsciiValue(tagDescription);\r\n                }\r\n            } else {\r\n                tagDescription = tagValue;\r\n            }\r\n        }\r\n        console.log (\"Name:\" + tagName + \", ID:\"  + tagCode + \", value:\" + tagValue);\r\n        tag = {\r\n            id: tagCode,\r\n            name: tagName,\r\n            value: tagValue,\r\n            description: tagDescription\r\n        };\r\n        if (IptcTagNames['iptc'][tagCode]['repeatable'] !== undefined) {\r\n            tag['repeatable'] = true;\r\n        }\r\n\r\n        // Optional 'encoding_name' from CCS\r\n        if (IptcTagNames['iptc'][tagCode]['encoding_name'] !== undefined) {\r\n            tag.encoding = IptcTagNames['iptc'][tagCode]['encoding_name'](tagValue);\r\n        }\r\n    } else {\r\n        tag = {\r\n            id: tagCode,\r\n            name: `undefined-${tagCode}`,\r\n            value: tagValue,\r\n            description: tagValue\r\n        };\r\n    }\r\n\r\n    return {tag, tagSize};\r\n}\r\n\r\nfunction getTagValue(dataView, offset, size) {\r\n    const value = [];\r\n\r\n    for (let valueIndex = 0; valueIndex < size; valueIndex++) {\r\n        value.push(dataView.getUint8(offset + valueIndex));\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nfunction decodeAsciiValue(asciiValue) {\r\n    try {\r\n        return decodeURIComponent(escape(asciiValue));\r\n    } catch (error) {\r\n        return asciiValue;\r\n    }\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nexport default {\r\n    0x0100: 'ImageWidth',\r\n    0x0101: 'ImageLength',\r\n    0x0102: 'BitsPerSample',\r\n    0x0103: 'Compression',\r\n    0x0106: 'PhotometricInterpretation',\r\n    0x010e: 'ImageDescription',\r\n    0x010f: 'Make',\r\n    0x0110: 'Model',\r\n    0x0111: 'StripOffsets',\r\n    0x0112: {\r\n        name: 'Orientation',\r\n        description: (value) => {\r\n            if (value === 1) {\r\n                return 'top-left';\r\n            }\r\n            if (value === 2) {\r\n                return 'top-right';\r\n            }\r\n            if (value === 3) {\r\n                return 'bottom-right';\r\n            }\r\n            if (value === 4) {\r\n                return 'bottom-left';\r\n            }\r\n            if (value === 5) {\r\n                return 'left-top';\r\n            }\r\n            if (value === 6) {\r\n                return 'right-top';\r\n            }\r\n            if (value === 7) {\r\n                return 'right-bottom';\r\n            }\r\n            if (value === 8) {\r\n                return 'left-bottom';\r\n            }\r\n            return 'Undefined';\r\n        }\r\n    },\r\n    0x0115: 'SamplesPerPixel',\r\n    0x0116: 'RowsPerStrip',\r\n    0x0117: 'StripByteCounts',\r\n    0x011a: 'XResolution',\r\n    0x011b: 'YResolution',\r\n    0x011c: 'PlanarConfiguration',\r\n    0x0128: {\r\n        name: 'ResolutionUnit',\r\n        description: (value) => {\r\n            if (value === 2) {\r\n                return 'inches';\r\n            }\r\n            if (value === 3) {\r\n                return 'centimeters';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x012d: 'TransferFunction',\r\n    0x0131: 'Software',\r\n    0x0132: 'DateTime',\r\n    0x013b: 'Artist',\r\n    0x013e: 'WhitePoint',\r\n    0x013f: 'PrimaryChromaticities',\r\n    0x0201: 'JPEGInterchangeFormat',\r\n    0x0202: 'JPEGInterchangeFormatLength',\r\n    0x0211: 'YCbCrCoefficients',\r\n    0x0212: 'YCbCrSubSampling',\r\n    0x0213: {\r\n        name: 'YCbCrPositioning',\r\n        description: (value) => {\r\n            if (value === 1) {\r\n                return 'centered';\r\n            }\r\n            if (value === 2) {\r\n                return 'co-sited';\r\n            }\r\n            return 'undefined ' + value;\r\n        }\r\n    },\r\n    0x0214: 'ReferenceBlackWhite',\r\n    0x8298: {\r\n        name: 'Copyright',\r\n        description: (value) => value.join('; ')\r\n    },\r\n    0x8769: 'Exif IFD Pointer',\r\n    0x8825: 'GPS Info IFD Pointer'\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {getStringValue, getEncodedString} from './tag-names-utils';\r\n\r\nexport default {\r\n    0x829a: 'ExposureTime',\r\n    0x829d: 'FNumber',\r\n    0x8822: {\r\n        'name': 'ExposureProgram',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Undefined';\r\n            } else if (value === 1) {\r\n                return 'Manual';\r\n            } else if (value === 2) {\r\n                return 'Normal program';\r\n            } else if (value === 3) {\r\n                return 'Aperture priority';\r\n            } else if (value === 4) {\r\n                return 'Shutter priority';\r\n            } else if (value === 5) {\r\n                return 'Creative program';\r\n            } else if (value === 6) {\r\n                return 'Action program';\r\n            } else if (value === 7) {\r\n                return 'Portrait mode';\r\n            } else if (value === 8) {\r\n                return 'Landscape mode';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x8824: 'SpectralSensitivity',\r\n    0x8827: 'ISOSpeedRatings',\r\n    0x8828: {\r\n        'name': 'OECF',\r\n        'description': () => '[Raw OECF table data]'\r\n    },\r\n    0x9000: {\r\n        'name': 'ExifVersion',\r\n        'description': (value) => getStringValue(value)\r\n    },\r\n    0x9003: 'DateTimeOriginal',\r\n    0x9004: 'DateTimeDigitized',\r\n    0x9101: {\r\n        'name': 'ComponentsConfiguration',\r\n        'description': (value) => {\r\n            return value.map((character) => {\r\n                if (character === 0x31) {\r\n                    return 'Y';\r\n                } else if (character === 0x32) {\r\n                    return 'Cb';\r\n                } else if (character === 0x33) {\r\n                    return 'Cr';\r\n                } else if (character === 0x34) {\r\n                    return 'R';\r\n                } else if (character === 0x35) {\r\n                    return 'G';\r\n                } else if (character === 0x36) {\r\n                    return 'B';\r\n                }\r\n            }).join('');\r\n        }\r\n    },\r\n    0x9102: 'CompressedBitsPerPixel',\r\n    0x9201: 'ShutterSpeedValue',\r\n    0x9202: 'ApertureValue',\r\n    0x9203: 'BrightnessValue',\r\n    0x9204: 'ExposureBiasValue',\r\n    0x9205: 'MaxApertureValue',\r\n    0x9206: 'SubjectDistance',\r\n    0x9207: {\r\n        'name': 'MeteringMode',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'Average';\r\n            } else if (value === 2) {\r\n                return 'CenterWeightedAverage';\r\n            } else if (value === 3) {\r\n                return 'Spot';\r\n            } else if (value === 4) {\r\n                return 'MultiSpot';\r\n            } else if (value === 5) {\r\n                return 'Pattern';\r\n            } else if (value === 6) {\r\n                return 'Partial';\r\n            } else if (value === 255) {\r\n                return 'Other';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x9208: {\r\n        'name': 'LightSource',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'Daylight';\r\n            } else if (value === 2) {\r\n                return 'Fluorescent';\r\n            } else if (value === 3) {\r\n                return 'Tungsten (incandescent light)';\r\n            } else if (value === 4) {\r\n                return 'Flash';\r\n            } else if (value === 9) {\r\n                return 'Fine weather';\r\n            } else if (value === 10) {\r\n                return 'Cloudy weather';\r\n            } else if (value === 11) {\r\n                return 'Shade';\r\n            } else if (value === 12) {\r\n                return 'Daylight fluorescent (D 5700  7100K)';\r\n            } else if (value === 13) {\r\n                return 'Day white fluorescent (N 4600  5400K)';\r\n            } else if (value === 14) {\r\n                return 'Cool white fluorescent (W 3900  4500K)';\r\n            } else if (value === 15) {\r\n                return 'White fluorescent (WW 3200  3700K)';\r\n            } else if (value === 17) {\r\n                return 'Standard light A';\r\n            } else if (value === 18) {\r\n                return 'Standard light B';\r\n            } else if (value === 19) {\r\n                return 'Standard light C';\r\n            } else if (value === 20) {\r\n                return 'D55';\r\n            } else if (value === 21) {\r\n                return 'D65';\r\n            } else if (value === 22) {\r\n                return 'D75';\r\n            } else if (value === 23) {\r\n                return 'D50';\r\n            } else if (value === 24) {\r\n                return 'ISO studio tungsten';\r\n            } else if (value === 255) {\r\n                return 'Other light source';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x9209: {\r\n        'name': 'Flash',\r\n        'description': (value) => {\r\n            if (value === 0x00) {\r\n                return 'Flash did not fire';\r\n            } else if (value === 0x01) {\r\n                return 'Flash fired';\r\n            } else if (value === 0x05) {\r\n                return 'Strobe return light not detected';\r\n            } else if (value === 0x07) {\r\n                return 'Strobe return light detected';\r\n            } else if (value === 0x09) {\r\n                return 'Flash fired, compulsory flash mode';\r\n            } else if (value === 0x0d) {\r\n                return 'Flash fired, compulsory flash mode, return light not detected';\r\n            } else if (value === 0x0f) {\r\n                return 'Flash fired, compulsory flash mode, return light detected';\r\n            } else if (value === 0x10) {\r\n                return 'Flash did not fire, compulsory flash mode';\r\n            } else if (value === 0x18) {\r\n                return 'Flash did not fire, auto mode';\r\n            } else if (value === 0x19) {\r\n                return 'Flash fired, auto mode';\r\n            } else if (value === 0x1d) {\r\n                return 'Flash fired, auto mode, return light not detected';\r\n            } else if (value === 0x1f) {\r\n                return 'Flash fired, auto mode, return light detected';\r\n            } else if (value === 0x20) {\r\n                return 'No flash function';\r\n            } else if (value === 0x41) {\r\n                return 'Flash fired, red-eye reduction mode';\r\n            } else if (value === 0x45) {\r\n                return 'Flash fired, red-eye reduction mode, return light not detected';\r\n            } else if (value === 0x47) {\r\n                return 'Flash fired, red-eye reduction mode, return light detected';\r\n            } else if (value === 0x49) {\r\n                return 'Flash fired, compulsory flash mode, red-eye reduction mode';\r\n            } else if (value === 0x4d) {\r\n                return 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected';\r\n            } else if (value === 0x4f) {\r\n                return 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected';\r\n            } else if (value === 0x59) {\r\n                return 'Flash fired, auto mode, red-eye reduction mode';\r\n            } else if (value === 0x5d) {\r\n                return 'Flash fired, auto mode, return light not detected, red-eye reduction mode';\r\n            } else if (value === 0x5f) {\r\n                return 'Flash fired, auto mode, return light detected, red-eye reduction mode';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x920a: 'FocalLength',\r\n    0x9214: {\r\n        'name': 'SubjectArea',\r\n        'description': (value) => {\r\n            if (value.length === 2) {\r\n                return `Location; X: ${value[0]}, Y: ${value[1]}`;\r\n            } else if (value.length === 3) {\r\n                return `Circle; X: ${value[0]}, Y: ${value[1]}, diameter: ${value[2]}`;\r\n            } else if (value.length === 4) {\r\n                return `Rectangle; X: ${value[0]}, Y: ${value[1]}, width: ${value[2]}, height: ${value[3]}`;\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x927c: {\r\n        'name': 'MakerNote',\r\n        'description': () => '[Raw maker note data]'\r\n    },\r\n    0x9286: {\r\n        'name': 'UserComment',\r\n        'description': getEncodedString\r\n    },\r\n    0x9290: 'SubSecTime',\r\n    0x9291: 'SubSecTimeOriginal',\r\n    0x9292: 'SubSecTimeDigitized',\r\n    0xa000: {\r\n        'name': 'FlashpixVersion',\r\n        'description': (value) => value.map((charCode) => String.fromCharCode(charCode)).join('')\r\n    },\r\n    0xa001: {\r\n        'name': 'ColorSpace',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'sRGB';\r\n            } else if (value === 0xffff) {\r\n                return 'Uncalibrated';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa002: 'PixelXDimension',\r\n    0xa003: 'PixelYDimension',\r\n    0xa004: 'RelatedSoundFile',\r\n    0xa005: 'Interoperability IFD Pointer',\r\n    0xa20b: 'FlashEnergy',\r\n    0xa20c: {\r\n        'name': 'SpatialFrequencyResponse',\r\n        'description': () => '[Raw SFR table data]'\r\n    },\r\n    0xa20e: 'FocalPlaneXResolution',\r\n    0xa20f: 'FocalPlaneYResolution',\r\n    0xa210: {\r\n        'name': 'FocalPlaneResolutionUnit',\r\n        'description': (value) => {\r\n            if (value === 2) {\r\n                return 'inches';\r\n            } else if (value === 3) {\r\n                return 'centimeters';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa214: {\r\n        'name': 'SubjectLocation',\r\n        'description': ([x, y]) => `X: ${x}, Y: ${y}`\r\n    },\r\n    0xa215: 'ExposureIndex',\r\n    0xa217: {\r\n        'name': 'SensingMethod',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'Undefined';\r\n            } else if (value === 2) {\r\n                return 'One-chip color area sensor';\r\n            } else if (value === 3) {\r\n                return 'Two-chip color area sensor';\r\n            } else if (value === 4) {\r\n                return 'Three-chip color area sensor';\r\n            } else if (value === 5) {\r\n                return 'Color sequential area sensor';\r\n            } else if (value === 7) {\r\n                return 'Trilinear sensor';\r\n            } else if (value === 8) {\r\n                return 'Color sequential linear sensor';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa300: {\r\n        'name': 'FileSource',\r\n        'description': (value) => {\r\n            if (value === 3) {\r\n                return 'DSC';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa301: {\r\n        'name': 'SceneType',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'A directly photographed image';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa302: {\r\n        'name': 'CFAPattern',\r\n        'description': () => '[Raw CFA pattern table data]'\r\n    },\r\n    0xa401: {\r\n        'name': 'CustomRendered',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Normal process';\r\n            } else if (value === 1) {\r\n                return 'Custom process';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa402: {\r\n        'name': 'ExposureMode',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Auto exposure';\r\n            } else if (value === 1) {\r\n                return 'Manual exposure';\r\n            } else if (value === 2) {\r\n                return 'Auto bracket';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa403: {\r\n        'name': 'WhiteBalance',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Auto white balance';\r\n            } else if (value === 1) {\r\n                return 'Manual white balance';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa404: {\r\n        'name': 'DigitalZoomRatio',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Digital zoom was not used';\r\n            }\r\n            return value;\r\n        }\r\n    },\r\n    0xa405: {\r\n        'name': 'FocalLengthIn35mmFilm',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Unknown';\r\n            }\r\n            return value;\r\n        }\r\n    },\r\n    0xa406: {\r\n        'name': 'SceneCaptureType',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Standard';\r\n            } else if (value === 1) {\r\n                return 'Landscape';\r\n            } else if (value === 2) {\r\n                return 'Portrait';\r\n            } else if (value === 3) {\r\n                return 'Night scene';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa407: {\r\n        'name': 'GainControl',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'None';\r\n            } else if (value === 1) {\r\n                return 'Low gain up';\r\n            } else if (value === 2) {\r\n                return 'High gain up';\r\n            } else if (value === 3) {\r\n                return 'Low gain down';\r\n            } else if (value === 4) {\r\n                return 'High gain down';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa408: {\r\n        'name': 'Contrast',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Normal';\r\n            } else if (value === 1) {\r\n                return 'Soft';\r\n            } else if (value === 2) {\r\n                return 'Hard';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa409: {\r\n        'name': 'Saturation',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Normal';\r\n            } else if (value === 1) {\r\n                return 'Low saturation';\r\n            } else if (value === 2) {\r\n                return 'High saturation';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa40a: {\r\n        'name': 'Sharpness',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Normal';\r\n            } else if (value === 1) {\r\n                return 'Soft';\r\n            } else if (value === 2) {\r\n                return 'Hard';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa40b: {\r\n        'name': 'DeviceSettingDescription',\r\n        'description': () => '[Raw device settings table data]'\r\n    },\r\n    0xa40c: {\r\n        'name': 'SubjectDistanceRange',\r\n        'description': (value) => {\r\n            if (value === 1) {\r\n                return 'Macro';\r\n            } else if (value === 2) {\r\n                return 'Close view';\r\n            } else if (value === 3) {\r\n                return 'Distant view';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0xa420: 'ImageUniqueID'\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {getEncodedString} from './tag-names-utils';\r\n\r\nexport default {\r\n    0x0000: {\r\n        'name': 'GPSVersionID',\r\n        'description': (value) => {\r\n            if (value[0] === 2 && value[1] === 2 && value[2] === 0 && value[3] === 0) {\r\n                return 'Version 2.2';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0001: {\r\n        'name': 'GPSLatitudeRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'N') {\r\n                return 'North latitude';\r\n            } else if (ref === 'S') {\r\n                return 'South latitude';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0002: {\r\n        'name': 'GPSLatitude',\r\n        'description': (value) => {\r\n            return value[0] + value[1] / 60 + value[2] / 3600;\r\n        }\r\n    },\r\n    0x0003: {\r\n        'name': 'GPSLongitudeRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'E') {\r\n                return 'East longitude';\r\n            } else if (ref === 'W') {\r\n                return 'West longitude';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0004: {\r\n        'name': 'GPSLongitude',\r\n        'description': (value) => {\r\n            return value[0] + value[1] / 60 + value[2] / 3600;\r\n        }\r\n    },\r\n    0x0005: {\r\n        'name': 'GPSAltitudeRef',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Sea level';\r\n            } else if (value === 1) {\r\n                return 'Sea level reference (negative value)';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0006: {\r\n        'name': 'GPSAltitude',\r\n        'description': (value) => {\r\n            return value + ' m';\r\n        }\r\n    },\r\n    0x0007: {\r\n        'name': 'GPSTimeStamp',\r\n        'description': (value) => {\r\n            return value.map((num) => {\r\n                if (`${num}`.length === 1) {\r\n                    return `0${num}`;\r\n                }\r\n                return num;\r\n            }).join(':');\r\n        }\r\n    },\r\n    0x0008: 'GPSSatellites',\r\n    0x0009: {\r\n        'name': 'GPSStatus',\r\n        'description': (value) => {\r\n            const status = value.join('');\r\n            if (status === 'A') {\r\n                return 'Measurement in progress';\r\n            } else if (status === 'V') {\r\n                return 'Measurement Interoperability';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x000a: {\r\n        'name': 'GPSMeasureMode',\r\n        'description': (value) => {\r\n            const mode = value.join('');\r\n            if (mode === '2') {\r\n                return '2-dimensional measurement';\r\n            } else if (mode === '3') {\r\n                return '3-dimensional measurement';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x000b: 'GPSDOP',\r\n    0x000c: {\r\n        'name': 'GPSSpeedRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'K') {\r\n                return 'Kilometers per hour';\r\n            } else if (ref === 'M') {\r\n                return 'Miles per hour';\r\n            } else if (ref === 'N') {\r\n                return 'Knots';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x000d: 'GPSSpeed',\r\n    0x000e: {\r\n        'name': 'GPSTrackRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'T') {\r\n                return 'True direction';\r\n            } else if (ref === 'M') {\r\n                return 'Magnetic direction';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x000f: 'GPSTrack',\r\n    0x0010: {\r\n        'name': 'GPSImgDirectionRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'T') {\r\n                return 'True direction';\r\n            } else if (ref === 'M') {\r\n                return 'Magnetic direction';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0011: 'GPSImgDirection',\r\n    0x0012: 'GPSMapDatum',\r\n    0x0013: {\r\n        'name': 'GPSDestLatitudeRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'N') {\r\n                return 'North latitude';\r\n            } else if (ref === 'S') {\r\n                return 'South latitude';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0014: {\r\n        'name': 'GPSDestLatitude',\r\n        'description': (value) => {\r\n            return value[0] + value[1] / 60 + value[2] / 3600;\r\n        }\r\n    },\r\n    0x0015: {\r\n        'name': 'GPSDestLongitudeRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'E') {\r\n                return 'East longitude';\r\n            } else if (ref === 'W') {\r\n                return 'West longitude';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0016: {\r\n        'name': 'GPSDestLongitude',\r\n        'description': (value) => {\r\n            return value[0] + value[1] / 60 + value[2] / 3600;\r\n        }\r\n    },\r\n    0x0017: {\r\n        'name': 'GPSDestBearingRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'T') {\r\n                return 'True direction';\r\n            } else if (ref === 'M') {\r\n                return 'Magnetic direction';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x0018: 'GPSDestBearing',\r\n    0x0019: {\r\n        'name': 'GPSDestDistanceRef',\r\n        'description': (value) => {\r\n            const ref = value.join('');\r\n            if (ref === 'K') {\r\n                return 'Kilometers';\r\n            } else if (ref === 'M') {\r\n                return 'Miles';\r\n            } else if (ref === 'N') {\r\n                return 'Knots';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    },\r\n    0x001a: 'GPSDestDistance',\r\n    0x001b: {\r\n        'name': 'GPSProcessingMethod',\r\n        'description': getEncodedString\r\n    },\r\n    0x001c: {\r\n        'name': 'GPSAreaInformation',\r\n        'description': getEncodedString\r\n    },\r\n    0x001d: 'GPSDateStamp',\r\n    0x001e: {\r\n        'name': 'GPSDifferential',\r\n        'description': (value) => {\r\n            if (value === 0) {\r\n                return 'Measurement without differential correction';\r\n            } else if (value === 1) {\r\n                return 'Differential correction applied';\r\n            }\r\n            return 'Unknown';\r\n        }\r\n    }\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nexport default {\r\n    0x0001: 'InteroperabilityIndex'\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nexport function getStringValue(value) {\r\n    return value.map((charCode) => String.fromCharCode(charCode)).join('');\r\n}\r\n\r\nexport function getEncodedString(value) {\r\n    if (value.length >= 8) {\r\n        const encoding = getStringValue(value.slice(0, 8));\r\n\r\n        if (encoding === 'ASCII\\x00\\x00\\x00') {\r\n            return getStringValue(value.slice(8));\r\n        } else if (encoding === 'JIS\\x00\\x00\\x00\\x00\\x00') {\r\n            return '[JIS encoded text]';\r\n        } else if (encoding === 'UNICODE\\x00') {\r\n            return '[Unicode encoded text]';\r\n        } else if (encoding === '\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00') {\r\n            return '[Undefined encoding]';\r\n        }\r\n    }\r\n\r\n    return 'Undefined';\r\n}\r\n\r\nexport function getCharacterArray(string) {\r\n    return string.split('').map((character) => character.charCodeAt(0));\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport TagNames0thIfd from './tag-names-0th-ifd';\r\nimport TagNamesExifIfd from './tag-names-exif-ifd';\r\nimport TagNamesGpsIfd from './tag-names-gps-ifd';\r\nimport TagNamesInteroperabilityIfd from './tag-names-interoperability-ifd';\r\n\r\nexport default {\r\n    '0th': TagNames0thIfd,\r\n    'exif': TagNamesExifIfd,\r\n    'gps': TagNamesGpsIfd,\r\n    'interoperability': TagNamesInteroperabilityIfd\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport ByteOrder from './byte-order';\r\nimport Types from './types';\r\nimport TagNames from './tag-names';\r\n\r\nconst EXIF_IFD_POINTER_KEY = 'Exif IFD Pointer';\r\nconst GPS_INFO_IFD_POINTER_KEY = 'GPS Info IFD Pointer';\r\nconst INTEROPERABILITY_IFD_POINTER_KEY = 'Interoperability IFD Pointer';\r\n\r\nconst getTagValueAt = {\r\n    1: Types.getByteAt,\r\n    2: Types.getAsciiAt,\r\n    3: Types.getShortAt,\r\n    4: Types.getLongAt,\r\n    5: Types.getRationalAt,\r\n    7: Types.getUndefinedAt,\r\n    9: Types.getSlongAt,\r\n    10: Types.getSrationalAt\r\n};\r\n\r\nexport default {\r\n    read\r\n};\r\n\r\nfunction read(dataView, tiffHeaderOffset) {\r\n    const byteOrder = ByteOrder.getByteOrder(dataView, tiffHeaderOffset);\r\n    let tags = read0thIfd(dataView, tiffHeaderOffset, byteOrder);\r\n    tags = readExifIfd(tags, dataView, tiffHeaderOffset, byteOrder);\r\n    tags = readGpsIfd(tags, dataView, tiffHeaderOffset, byteOrder);\r\n    tags = readInteroperabilityIfd(tags, dataView, tiffHeaderOffset, byteOrder);\r\n\r\n    return tags;\r\n}\r\n\r\nfunction read0thIfd(dataView, tiffHeaderOffset, byteOrder) {\r\n    return readIfd(dataView, '0th', tiffHeaderOffset, get0thIfdOffset(dataView, tiffHeaderOffset, byteOrder), byteOrder);\r\n}\r\n\r\nfunction get0thIfdOffset(dataView, tiffHeaderOffset, byteOrder) {\r\n    return tiffHeaderOffset + Types.getLongAt(dataView, tiffHeaderOffset + 4, byteOrder);\r\n}\r\n\r\nfunction readExifIfd(tags, dataView, tiffHeaderOffset, byteOrder) {\r\n    if (tags[EXIF_IFD_POINTER_KEY] !== undefined) {\r\n        return Object.assign(tags, readIfd(dataView, 'exif', tiffHeaderOffset, tiffHeaderOffset + tags[EXIF_IFD_POINTER_KEY].value, byteOrder));\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction readGpsIfd(tags, dataView, tiffHeaderOffset, byteOrder) {\r\n    if (tags[GPS_INFO_IFD_POINTER_KEY] !== undefined) {\r\n        return Object.assign(tags, readIfd(dataView, 'gps', tiffHeaderOffset, tiffHeaderOffset + tags[GPS_INFO_IFD_POINTER_KEY].value, byteOrder));\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction readInteroperabilityIfd(tags, dataView, tiffHeaderOffset, byteOrder) {\r\n    if (tags[INTEROPERABILITY_IFD_POINTER_KEY] !== undefined) {\r\n        return Object.assign(tags, readIfd(dataView, 'interoperability', tiffHeaderOffset, tiffHeaderOffset + tags[INTEROPERABILITY_IFD_POINTER_KEY].value, byteOrder));\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction readIfd(dataView, ifdType, tiffHeaderOffset, offset, byteOrder) {\r\n    const FIELD_COUNT_SIZE = Types.getTypeSize('SHORT');\r\n    const FIELD_SIZE = 12;\r\n\r\n    const tags = {};\r\n    const numberOfFields = Types.getShortAt(dataView, offset, byteOrder);\r\n\r\n    offset += FIELD_COUNT_SIZE;\r\n    for (let fieldIndex = 0; fieldIndex < numberOfFields; fieldIndex++) {\r\n        const tag = readTag(dataView, ifdType, tiffHeaderOffset, offset, byteOrder);\r\n        if (tag !== undefined) {\r\n            tags[tag.name] = {'value': tag.value, 'description': tag.description};\r\n        }\r\n        offset += FIELD_SIZE;\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction readTag(dataView, ifdType, tiffHeaderOffset, offset, byteOrder) {\r\n    const TAG_TYPE_OFFSET = Types.getTypeSize('SHORT');\r\n    const TAG_COUNT_OFFSET = TAG_TYPE_OFFSET + Types.getTypeSize('SHORT');\r\n    const TAG_VALUE_OFFSET = TAG_COUNT_OFFSET + Types.getTypeSize('LONG');\r\n\r\n    const tagCode = Types.getShortAt(dataView, offset, byteOrder);\r\n    const tagType = Types.getShortAt(dataView, offset + TAG_TYPE_OFFSET, byteOrder);\r\n    const tagCount = Types.getLongAt(dataView, offset + TAG_COUNT_OFFSET, byteOrder);\r\n    let tagValue;\r\n\r\n    if (Types.typeSizes[tagType] === undefined) {\r\n        return undefined;\r\n    }\r\n\r\n    if (tagValueFitsInOffsetSlot(tagType, tagCount)) {\r\n        tagValue = getTagValue(dataView, offset + TAG_VALUE_OFFSET, tagType, tagCount, byteOrder);\r\n    } else {\r\n        const tagValueOffset = Types.getLongAt(dataView, offset + TAG_VALUE_OFFSET, byteOrder);\r\n        if (tagValueFitsInDataView(dataView, tiffHeaderOffset, tagValueOffset, tagType, tagCount)) {\r\n            tagValue = getTagValue(dataView, tiffHeaderOffset + tagValueOffset, tagType, tagCount, byteOrder);\r\n        } else {\r\n            tagValue = '<faulty value>';\r\n        }\r\n    }\r\n\r\n    if (tagType === Types.tagTypes['ASCII']) {\r\n        tagValue = splitNullSeparatedAsciiString(tagValue);\r\n        tagValue = decodeAsciiValue(tagValue);\r\n    }\r\n\r\n    if (TagNames[ifdType][tagCode] !== undefined) {\r\n        let tagName, tagDescription;\r\n\r\n        if ((TagNames[ifdType][tagCode]['name'] !== undefined) && (TagNames[ifdType][tagCode]['description'] !== undefined)) {\r\n            tagName = TagNames[ifdType][tagCode]['name'];\r\n            tagDescription = TagNames[ifdType][tagCode]['description'](tagValue);\r\n        } else {\r\n            tagName = TagNames[ifdType][tagCode];\r\n            if (tagValue instanceof Array) {\r\n                tagDescription = tagValue.join(', ');\r\n            } else {\r\n                tagDescription = tagValue;\r\n            }\r\n        }\r\n        return {\r\n            name: tagName,\r\n            value: tagValue,\r\n            description: tagDescription\r\n        };\r\n    }\r\n\r\n    return {\r\n        name: `undefined-${tagCode}`,\r\n        value: tagValue,\r\n        description: tagValue\r\n    };\r\n}\r\n\r\nfunction tagValueFitsInOffsetSlot(tagType, tagCount) {\r\n    return Types.typeSizes[tagType] * tagCount <= Types.getTypeSize('LONG');\r\n}\r\n\r\nfunction getTagValue(dataView, offset, type, count, byteOrder) {\r\n    let value = [];\r\n\r\n    for (let valueIndex = 0; valueIndex < count; valueIndex++) {\r\n        value.push(getTagValueAt[type](dataView, offset, byteOrder));\r\n        offset += Types.typeSizes[type];\r\n    }\r\n\r\n    if (type === Types.tagTypes['ASCII']) {\r\n        value = Types.getAsciiValue(value);\r\n    } else if (value.length === 1) {\r\n        value = value[0];\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nfunction tagValueFitsInDataView(dataView, tiffHeaderOffset, tagValueOffset, tagType, tagCount) {\r\n    return tiffHeaderOffset + tagValueOffset + Types.typeSizes[tagType] * tagCount <= dataView.byteLength;\r\n}\r\n\r\nfunction splitNullSeparatedAsciiString(string) {\r\n    const tagValue = [];\r\n    let i = 0;\r\n\r\n    for (const character of string) {\r\n        if (character === '\\x00') {\r\n            i++;\r\n            continue;\r\n        }\r\n        if (tagValue[i] === undefined) {\r\n            tagValue[i] = '';\r\n        }\r\n        tagValue[i] += character;\r\n    }\r\n\r\n    return tagValue;\r\n}\r\n\r\nfunction decodeAsciiValue(asciiValue) {\r\n    try {\r\n        return asciiValue.map((value) => decodeURIComponent(escape(value)));\r\n    } catch (error) {\r\n        return asciiValue;\r\n    }\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport ByteOrder from './byte-order';\r\n\r\nconst typeSizes = {\r\n    1: 1, // BYTE\r\n    2: 1, // ASCII\r\n    3: 2, // SHORT\r\n    4: 4, // LONG\r\n    5: 8, // RATIONAL\r\n    7: 1, // UNDEFINED\r\n    9: 4, // SLONG\r\n    10: 8 // SRATIONAL\r\n};\r\n\r\nconst tagTypes = {\r\n    'BYTE': 1,\r\n    'ASCII': 2,\r\n    'SHORT': 3,\r\n    'LONG': 4,\r\n    'RATIONAL': 5,\r\n    'UNDEFINED': 7,\r\n    'SLONG': 9,\r\n    'SRATIONAL': 10\r\n};\r\n\r\nexport default {\r\n    getAsciiValue,\r\n    getByteAt,\r\n    getAsciiAt,\r\n    getShortAt,\r\n    getLongAt,\r\n    getRationalAt,\r\n    getUndefinedAt,\r\n    getSlongAt,\r\n    getSrationalAt,\r\n    typeSizes,\r\n    tagTypes,\r\n    getTypeSize\r\n};\r\n\r\nfunction getAsciiValue(charArray) {\r\n    return charArray.map((charCode) => String.fromCharCode(charCode));\r\n}\r\n\r\nfunction getByteAt(dataView, offset) {\r\n    return dataView.getUint8(offset);\r\n}\r\n\r\nfunction getAsciiAt(dataView, offset) {\r\n    return dataView.getUint8(offset);\r\n}\r\n\r\nfunction getShortAt(dataView, offset, byteOrder) {\r\n    return dataView.getUint16(offset, byteOrder === ByteOrder.LITTLE_ENDIAN);\r\n}\r\n\r\nfunction getLongAt(dataView, offset, byteOrder) {\r\n    return dataView.getUint32(offset, byteOrder === ByteOrder.LITTLE_ENDIAN);\r\n}\r\n\r\nfunction getRationalAt(dataView, offset, byteOrder) {\r\n    return getLongAt(dataView, offset, byteOrder) / getLongAt(dataView, offset + 4, byteOrder);\r\n}\r\n\r\nfunction getUndefinedAt(dataView, offset) {\r\n    return getByteAt(dataView, offset);\r\n}\r\n\r\nfunction getSlongAt(dataView, offset, byteOrder) {\r\n    return dataView.getInt32(offset, byteOrder === ByteOrder.LITTLE_ENDIAN);\r\n}\r\n\r\nfunction getSrationalAt(dataView, offset, byteOrder) {\r\n    return getSlongAt(dataView, offset, byteOrder) / getSlongAt(dataView, offset + 4, byteOrder);\r\n}\r\n\r\nfunction getTypeSize(typeName) {\r\n    if (tagTypes[typeName] === undefined) {\r\n        throw new Error('No such type found.');\r\n    }\r\n\r\n    return typeSizes[tagTypes[typeName]];\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nexport function getStringFromDataView(dataView, offset, length) {\r\n    const chars = [];\r\n    for (let i = 0; i < length && offset + i < dataView.byteLength; i++) {\r\n        chars.push(dataView.getUint8(offset + i, false));\r\n    }\r\n    return getAsciiValue(chars).join('');\r\n}\r\n\r\nfunction getAsciiValue(charArray) {\r\n    return charArray.map((charCode) => String.fromCharCode(charCode));\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nexport default {\r\n    'tiff:Orientation'(value) {\r\n        if (value === '1') {\r\n            return 'Horizontal (normal)';\r\n        }\r\n        if (value === '2') {\r\n            return 'Mirror horizontal';\r\n        }\r\n        if (value === '3') {\r\n            return 'Rotate 180';\r\n        }\r\n        if (value === '4') {\r\n            return 'Mirror vertical';\r\n        }\r\n        if (value === '5') {\r\n            return 'Mirror horizontal and rotate 270 CW';\r\n        }\r\n        if (value === '6') {\r\n            return 'Rotate 90 CW';\r\n        }\r\n        if (value === '7') {\r\n            return 'Mirror horizontal and rotate 90 CW';\r\n        }\r\n        if (value === '8') {\r\n            return 'Rotate 270 CW';\r\n        }\r\n        return value;\r\n    },\r\n    'exif:GPSLatitude': calculateGPSValue,\r\n    'exif:GPSLongitude': calculateGPSValue\r\n};\r\n\r\nfunction calculateGPSValue(value) {\r\n    const [degreesString, minutesString] = value.split(',');\r\n    if ((degreesString !== undefined) && (minutesString !== undefined)) {\r\n        const degrees = parseFloat(degreesString);\r\n        const minutes = parseFloat(minutesString);\r\n        const ref = minutesString.charAt(minutesString.length - 1);\r\n        if ((!Number.isNaN(degrees)) && (!Number.isNaN(minutes))) {\r\n            return '' + (degrees + minutes / 60) + ref;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {getStringFromDataView} from './utils';\r\nimport XmpTagNames from './xmp-tag-names';\r\n\r\nexport default {\r\n    read\r\n};\r\n\r\nfunction read(dataView, dataOffset, metadataSize) {\r\n    try {\r\n        const doc = getDocument(dataView, dataOffset, metadataSize);\r\n        const rdf = getRDF(doc);\r\n\r\n        return parseXMPObject(convertToObject(rdf, true));\r\n    } catch (error) {\r\n        return {};\r\n    }\r\n}\r\n\r\nfunction getDocument(dataView, dataOffset, metadataSize) {\r\n    if (typeof DOMParser === 'undefined') {\r\n        console.warn('Warning: DOMParser is not available. If you\\'re using Node.js you probably want to do this:\\n  1. Install a DOM parser, e.g. xmldom: npm install --save xmldom\\n  2. Require that at the top of your script: global.DOMParser = require(\\'xmldom\\').DOMParser;\\nSee an example of this in the ExifReader example directory.'); // eslint-disable-line no-console\r\n        throw new Error();\r\n    }\r\n\r\n    const domParser = new DOMParser();\r\n    const xmlSource = getStringFromDataView(dataView, dataOffset, metadataSize);\r\n    const doc = domParser.parseFromString(xmlSource, 'application/xml');\r\n\r\n    if (doc.documentElement.nodeName === 'parsererror') {\r\n        throw new Error();\r\n    }\r\n\r\n    return doc;\r\n}\r\n\r\nfunction getRDF(node) {\r\n    for (let i = 0; i < node.childNodes.length; i++) {\r\n        if (node.childNodes[i].tagName === 'x:xmpmeta') {\r\n            return getRDF(node.childNodes[i]);\r\n        }\r\n        if (node.childNodes[i].tagName === 'rdf:RDF') {\r\n            return node.childNodes[i];\r\n        }\r\n    }\r\n\r\n    throw new Error();\r\n}\r\n\r\nfunction convertToObject(node, isTopNode = false) {\r\n    const childNodes = getChildNodes(node);\r\n\r\n    if (hasTextOnlyContent(childNodes)) {\r\n        if (isTopNode) {\r\n            return {};\r\n        }\r\n        return getTextValue(childNodes[0]);\r\n    }\r\n\r\n    return getElementsFromNodes(childNodes);\r\n}\r\n\r\nfunction getChildNodes(node) {\r\n    const elements = [];\r\n\r\n    for (let i = 0; i < node.childNodes.length; i++) {\r\n        elements.push(node.childNodes[i]);\r\n    }\r\n\r\n    return elements;\r\n}\r\n\r\nfunction hasTextOnlyContent(nodes) {\r\n    return (nodes.length === 1) && (nodes[0].nodeName === '#text');\r\n}\r\n\r\nfunction getTextValue(node) {\r\n    return node.nodeValue;\r\n}\r\n\r\nfunction getElementsFromNodes(nodes) {\r\n    const elements = {};\r\n\r\n    nodes.forEach((node) => {\r\n        if (isElement(node)) {\r\n            const nodeElement = getElementFromNode(node);\r\n\r\n            if (elements[node.nodeName] !== undefined) {\r\n                if (!Array.isArray(elements[node.nodeName])) {\r\n                    elements[node.nodeName] = [elements[node.nodeName]];\r\n                }\r\n                elements[node.nodeName].push(nodeElement);\r\n            } else {\r\n                elements[node.nodeName] = nodeElement;\r\n            }\r\n        }\r\n    });\r\n\r\n    return elements;\r\n}\r\n\r\nfunction isElement(node) {\r\n    return (node.nodeName) && (node.nodeName !== '#text');\r\n}\r\n\r\nfunction getElementFromNode(node) {\r\n    return {\r\n        attributes: getAttributes(node),\r\n        value: convertToObject(node)\r\n    };\r\n}\r\n\r\nfunction getAttributes(element) {\r\n    const attributes = {};\r\n\r\n    for (let i = 0; i < element.attributes.length; i++) {\r\n        attributes[element.attributes[i].nodeName] = element.attributes[i].value;\r\n    }\r\n\r\n    return attributes;\r\n}\r\n\r\nfunction parseXMPObject(xmpObject) {\r\n    const tags = {};\r\n\r\n    if (typeof xmpObject === 'string') {\r\n        return xmpObject;\r\n    }\r\n\r\n    for (const nodeName in xmpObject) {\r\n        let nodes = xmpObject[nodeName];\r\n\r\n        if (!Array.isArray(nodes)) {\r\n            nodes = [nodes];\r\n        }\r\n\r\n        nodes.forEach((node) => {\r\n            Object.assign(tags, parseNodeAttributesAsTags(node.attributes));\r\n            if (typeof node.value === 'object') {\r\n                Object.assign(tags, parseNodeChildrenAsTags(node.value));\r\n            }\r\n        });\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction parseNodeAttributesAsTags(attributes) {\r\n    const tags = {};\r\n\r\n    for (const name in attributes) {\r\n        if (isTagAttribute(name)) {\r\n            tags[getLocalName(name)] = {\r\n                value: attributes[name],\r\n                attributes: {},\r\n                description: getDescription(attributes[name], name)\r\n            };\r\n        }\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction isTagAttribute(name) {\r\n    return (name !== 'rdf:parseType') && (!isNamespaceDefinition(name));\r\n}\r\n\r\nfunction isNamespaceDefinition(name) {\r\n    return name.split(':')[0] === 'xmlns';\r\n}\r\n\r\nfunction getLocalName(name) {\r\n    return name.split(':')[1];\r\n}\r\n\r\nfunction getDescription(value, name = undefined) {\r\n    if (Array.isArray(value)) {\r\n        return getDescriptionOfArray(value);\r\n    }\r\n    if (typeof value === 'object') {\r\n        return getDescriptionOfObject(value);\r\n    }\r\n\r\n    try {\r\n        if ((name) && (typeof XmpTagNames[name] === 'function')) {\r\n            return XmpTagNames[name](value);\r\n        }\r\n        return decodeURIComponent(escape(value));\r\n    } catch (error) {\r\n        return value;\r\n    }\r\n}\r\n\r\nfunction getDescriptionOfArray(value) {\r\n    return value.map((item) => {\r\n        if (item.value !== undefined) {\r\n            return getDescription(item.value);\r\n        }\r\n        return getDescription(item);\r\n    }).join(', ');\r\n}\r\n\r\nfunction getDescriptionOfObject(value) {\r\n    const descriptions = [];\r\n\r\n    for (const key in value) {\r\n        descriptions.push(`${getClearTextKey(key)}: ${value[key].value}`);\r\n    }\r\n\r\n    return descriptions.join('; ');\r\n}\r\n\r\nfunction getClearTextKey(key) {\r\n    if (key === 'CiAdrCity') {\r\n        return 'CreatorCity';\r\n    }\r\n    if (key === 'CiAdrCtry') {\r\n        return 'CreatorCountry';\r\n    }\r\n    if (key === 'CiAdrExtadr') {\r\n        return 'CreatorAddress';\r\n    }\r\n    if (key === 'CiAdrPcode') {\r\n        return 'CreatorPostalCode';\r\n    }\r\n    if (key === 'CiAdrRegion') {\r\n        return 'CreatorRegion';\r\n    }\r\n    if (key === 'CiEmailWork') {\r\n        return 'CreatorWorkEmail';\r\n    }\r\n    if (key === 'CiTelWork') {\r\n        return 'CreatorWorkPhone';\r\n    }\r\n    if (key === 'CiUrlWork') {\r\n        return 'CreatorWorkUrl';\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction parseNodeChildrenAsTags(children) {\r\n    const tags = {};\r\n\r\n    for (const name in children) {\r\n        if (!isNamespaceDefinition(name)) {\r\n            tags[getLocalName(name)] = parseNodeAsTag(children[name], name);\r\n        }\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\nfunction parseNodeAsTag(node, name) {\r\n    if (hasNestedSimpleRdfDescription(node)) {\r\n        return parseNodeAsSimpleRdfDescription(node, name);\r\n    } else if (hasNestedStructureRdfDescription(node)) {\r\n        return parseNodeAsStructureRdfDescription(node, name);\r\n    } else if (isCompactStructure(node)) {\r\n        return parseNodeAsCompactStructure(node, name);\r\n    } else if (isArray(node)) {\r\n        return parseNodeAsArray(node, name);\r\n    }\r\n    return parseNodeAsSimpleValue(node, name);\r\n}\r\n\r\nfunction hasNestedSimpleRdfDescription(node) {\r\n    return ((node.attributes['rdf:parseType'] === 'Resource') && (node.value['rdf:value'] !== undefined))\r\n        || ((node.value['rdf:Description'] !== undefined) && (node.value['rdf:Description'].value['rdf:value'] !== undefined));\r\n}\r\n\r\nfunction parseNodeAsSimpleRdfDescription(node, name) {\r\n    const attributes = parseNodeAttributes(node);\r\n\r\n    if (node.value['rdf:Description'] !== undefined) {\r\n        node = node.value['rdf:Description'];\r\n    }\r\n\r\n    Object.assign(attributes, parseNodeAttributes(node), parseNodeChildrenAsAttributes(node));\r\n\r\n    const value = parseRdfValue(node);\r\n\r\n    return {\r\n        value,\r\n        attributes,\r\n        description: getDescription(value, name)\r\n    };\r\n}\r\n\r\nfunction parseNodeAttributes(node) {\r\n    const attributes = {};\r\n\r\n    for (const name in node.attributes) {\r\n        if ((name !== 'rdf:parseType') && (name !== 'rdf:resource') && (!isNamespaceDefinition(name))) {\r\n            attributes[getLocalName(name)] = node.attributes[name];\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n}\r\n\r\nfunction parseNodeChildrenAsAttributes(node) {\r\n    const attributes = {};\r\n\r\n    for (const name in node.value) {\r\n        if ((name !== 'rdf:value') && (!isNamespaceDefinition(name))) {\r\n            attributes[getLocalName(name)] = node.value[name].value;\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n}\r\n\r\nfunction parseRdfValue(node) {\r\n    return getURIValue(node.value['rdf:value']) || node.value['rdf:value'].value;\r\n}\r\n\r\nfunction hasNestedStructureRdfDescription(node) {\r\n    return (node.attributes['rdf:parseType'] === 'Resource')\r\n        || ((node.value['rdf:Description'] !== undefined) && (node.value['rdf:Description'].value['rdf:value'] === undefined));\r\n}\r\n\r\nfunction parseNodeAsStructureRdfDescription(node, name) {\r\n    const tag = {\r\n        value: {},\r\n        attributes: {}\r\n    };\r\n\r\n    if (node.value['rdf:Description'] !== undefined) {\r\n        Object.assign(tag.value, parseNodeAttributesAsTags(node.value['rdf:Description'].attributes));\r\n        Object.assign(tag.attributes, parseNodeAttributes(node));\r\n        node = node.value['rdf:Description'];\r\n    }\r\n\r\n    Object.assign(tag.value, parseNodeChildrenAsTags(node.value));\r\n\r\n    tag.description = getDescription(tag.value, name);\r\n\r\n    return tag;\r\n}\r\n\r\nfunction isCompactStructure(node) {\r\n    return (Object.keys(node.value).length === 0)\r\n        && (node.attributes['rdf:resource'] === undefined);\r\n}\r\n\r\nfunction parseNodeAsCompactStructure(node, name) {\r\n    const value = parseNodeAttributesAsTags(node.attributes);\r\n\r\n    return {\r\n        value,\r\n        attributes: {},\r\n        description: getDescription(value, name)\r\n    };\r\n}\r\n\r\nfunction isArray(node) {\r\n    return getArrayChild(node.value) !== undefined;\r\n}\r\n\r\nfunction getArrayChild(value) {\r\n    return value['rdf:Bag'] || value['rdf:Seq'] || value['rdf:Alt'];\r\n}\r\n\r\nfunction parseNodeAsArray(node, name) {\r\n    let items = getArrayChild(node.value).value['rdf:li'];\r\n    const attributes = parseNodeAttributes(node);\r\n    const value = [];\r\n\r\n    if (!Array.isArray(items)) {\r\n        items = [items];\r\n    }\r\n\r\n    items.forEach((item) => {\r\n        value.push(parseArrayValue(item));\r\n    });\r\n\r\n    return {\r\n        value,\r\n        attributes,\r\n        description: getDescription(value, name)\r\n    };\r\n}\r\n\r\nfunction parseArrayValue(item) {\r\n    if (hasNestedSimpleRdfDescription(item)) {\r\n        return parseNodeAsSimpleRdfDescription(item);\r\n    }\r\n\r\n    if (hasNestedArrayValue(item)) {\r\n        return parseNodeChildrenAsTags(item.value);\r\n    }\r\n\r\n    return {\r\n        value: item.value,\r\n        attributes: parseNodeAttributes(item),\r\n        description: getDescription(item.value)\r\n    };\r\n}\r\n\r\nfunction hasNestedArrayValue(node) {\r\n    return node.attributes['rdf:parseType'] === 'Resource';\r\n}\r\n\r\nfunction parseNodeAsSimpleValue(node, name) {\r\n    const value = getURIValue(node) || parseXMPObject(node.value);\r\n\r\n    return {\r\n        value,\r\n        attributes: parseNodeAttributes(node),\r\n        description: getDescription(value, name)\r\n    };\r\n}\r\n\r\nfunction getURIValue(node) {\r\n    return node.attributes && node.attributes['rdf:resource'];\r\n}\r\n"],"sourceRoot":""}